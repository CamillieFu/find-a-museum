{"ast":null,"code":"import mapboxgl from 'mapbox-gl';\n\nrequire(\"dotenv\").config(); // display map\n\n\nvar showMap = function showMap(coordinates) {\n  mapboxgl.accessToken = token;\n  var map = new mapboxgl.Map({\n    container: 'map',\n    style: 'mapbox://styles/mapbox/streets-v9',\n    center: coordinates,\n    zoom: 12\n  });\n  new mapboxgl.Marker().setLngLat(coordinates).addTo(map);\n}; // const submitButton = document.querySelector('#submit');\n// submitButton.addEventListener('click', (event) => {\n//   event.preventDefault();\n//   const coordinates = document.querySelector('#text').value;\n//   const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=${coordinates}&limit=5&access_token=${process.env.MAPBOX_API_KEY}`;\n//   fetch(url)\n//     .then(response => response.json())\n//     .then((data) => {\n//       console.log(data);\n//       data.features.forEach((feature) => {\n//         const autoComp = `\n//         <span>${feature.place_name}</span>`;\n//         paragraph.insertAdjacentHTML(\"beforeend\", autoComp);\n//       });\n//       // showMap(coordinates);\n//     });\n// });\n\n\nvar findMuseum = function findMuseum() {\n  var submitButton = document.querySelector('#submit');\n  submitButton.addEventListener('click', function (event) {\n    event.preventDefault();\n    var coordinates = document.querySelector('#text').value;\n    var url = \"https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=\".concat(coordinates, \"&limit=5&access_token=\").concat(process.env.MAPBOX_API_KEY);\n    fetch(url).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      console.log(data);\n      data.features.forEach(function (feature) {\n        var postalCode = feature.context[0].id;\n        var museum = feature.place_name;\n        console.log(museum);\n        console.log(postalCode.substr(9, postalCode.length));\n      });\n    });\n  });\n};\n\nexport { findMuseum };","map":{"version":3,"sources":["/Users/cfujisaki/code/CamillieFu/find-a-museum/app/javascript/packs/museums.js"],"names":["mapboxgl","require","config","showMap","coordinates","accessToken","token","map","Map","container","style","center","zoom","Marker","setLngLat","addTo","findMuseum","submitButton","document","querySelector","addEventListener","event","preventDefault","value","url","process","env","MAPBOX_API_KEY","fetch","then","response","json","data","console","log","features","forEach","feature","postalCode","context","id","museum","place_name","substr","length"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,WAArB;;AACAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB,G,CAEA;;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,WAAD,EAAiB;AAC/BJ,EAAAA,QAAQ,CAACK,WAAT,GAAuBC,KAAvB;AACA,MAAMC,GAAG,GAAG,IAAIP,QAAQ,CAACQ,GAAb,CAAiB;AAC3BC,IAAAA,SAAS,EAAE,KADgB;AAE3BC,IAAAA,KAAK,EAAE,mCAFoB;AAG3BC,IAAAA,MAAM,EAAEP,WAHmB;AAI3BQ,IAAAA,IAAI,EAAE;AAJqB,GAAjB,CAAZ;AAMA,MAAIZ,QAAQ,CAACa,MAAb,GACGC,SADH,CACaV,WADb,EAEGW,KAFH,CAESR,GAFT;AAGD,CAXD,C,CAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAMS,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,MAAMC,YAAY,GAAGC,QAAQ,CAACC,aAAT,CAAuB,SAAvB,CAArB;AACAF,EAAAA,YAAY,CAACG,gBAAb,CAA8B,OAA9B,EAAuC,UAACC,KAAD,EAAW;AAChDA,IAAAA,KAAK,CAACC,cAAN;AACA,QAAMlB,WAAW,GAAGc,QAAQ,CAACC,aAAT,CAAuB,OAAvB,EAAgCI,KAApD;AACA,QAAMC,GAAG,+FAAwFpB,WAAxF,mCAA4HqB,OAAO,CAACC,GAAR,CAAYC,cAAxI,CAAT;AACAC,IAAAA,KAAK,CAACJ,GAAD,CAAL,CACGK,IADH,CACQ,UAAAC,QAAQ;AAAA,aAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,KADhB,EAEGF,IAFH,CAEQ,UAACG,IAAD,EAAU;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAA,MAAAA,IAAI,CAACG,QAAL,CAAcC,OAAd,CAAsB,UAACC,OAAD,EAAa;AACjC,YAAMC,UAAU,GAAGD,OAAO,CAACE,OAAR,CAAgB,CAAhB,EAAmBC,EAAtC;AACA,YAAMC,MAAM,GAAGJ,OAAO,CAACK,UAAvB;AACAT,QAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ;AACAR,QAAAA,OAAO,CAACC,GAAR,CAAYI,UAAU,CAACK,MAAX,CAAkB,CAAlB,EAAqBL,UAAU,CAACM,MAAhC,CAAZ;AACD,OALD;AAMD,KAVH;AAWD,GAfD;AAgBD,CAlBD;;AAoBA,SAAS5B,UAAT","sourcesContent":["import mapboxgl from 'mapbox-gl';\nrequire(\"dotenv\").config()\n\n// display map\nconst showMap = (coordinates) => {\n  mapboxgl.accessToken = token;\n  const map = new mapboxgl.Map({\n    container: 'map',\n    style: 'mapbox://styles/mapbox/streets-v9',\n    center: coordinates,\n    zoom: 12\n  });\n  new mapboxgl.Marker()\n    .setLngLat(coordinates)\n    .addTo(map);\n};\n\n// const submitButton = document.querySelector('#submit');\n// submitButton.addEventListener('click', (event) => {\n//   event.preventDefault();\n//   const coordinates = document.querySelector('#text').value;\n//   const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=${coordinates}&limit=5&access_token=${process.env.MAPBOX_API_KEY}`;\n//   fetch(url)\n//     .then(response => response.json())\n//     .then((data) => {\n//       console.log(data);\n//       data.features.forEach((feature) => {\n//         const autoComp = `\n//         <span>${feature.place_name}</span>`;\n//         paragraph.insertAdjacentHTML(\"beforeend\", autoComp);\n//       });\n//       // showMap(coordinates);\n//     });\n// });\n\nconst findMuseum = () => {\n  const submitButton = document.querySelector('#submit');\n  submitButton.addEventListener('click', (event) => {\n    event.preventDefault();\n    const coordinates = document.querySelector('#text').value;\n    const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=${coordinates}&limit=5&access_token=${process.env.MAPBOX_API_KEY}`;\n    fetch(url)\n      .then(response => response.json())\n      .then((data) => {\n        console.log(data);\n        data.features.forEach((feature) => {\n          const postalCode = feature.context[0].id\n          const museum = feature.place_name\n          console.log(museum)\n          console.log(postalCode.substr(9, postalCode.length))\n        });\n      });\n  });\n}\n\nexport { findMuseum };\n"]},"metadata":{},"sourceType":"module"}