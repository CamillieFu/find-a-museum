{"ast":null,"code":"require(\"dotenv\").config();\n\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css'; // display map\n// const showMap = (coordinates) => {\n//   mapboxgl.accessToken = token;\n//   const map = new mapboxgl.Map({\n//     container: 'map',\n//     style: 'mapbox://styles/mapbox/streets-v9',\n//     center: coordinates,\n//     zoom: 12\n//   });\n//   new mapboxgl.Marker()\n//     .setLngLat(coordinates)\n//     .addTo(map);\n// };\n// const submitButton = document.querySelector('#submit');\n// submitButton.addEventListener('click', (event) => {\n//   event.preventDefault();\n//   const coordinates = document.querySelector('#text').value;\n//   const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=${coordinates}&limit=5&access_token=${process.env.MAPBOX_API_KEY}`;\n//   fetch(url)\n//     .then(response => response.json())\n//     .then((data) => {\n//       console.log(data);\n//       data.features.forEach((feature) => {\n//         const autoComp = `\n//         <span>${feature.place_name}</span>`;\n//         paragraph.insertAdjacentHTML(\"beforeend\", autoComp);\n//       });\n//       // showMap(coordinates);\n//     });\n// });\n\nvar findMuseum = function findMuseum() {\n  var mapElement = document.getElementById('map');\n  mapboxgl.accessToken = mapElement.dataset.mapboxApiKey;\n  var submitButton = document.querySelector('#submit');\n  submitButton.addEventListener('click', function (event) {\n    event.preventDefault();\n    var coordinates = document.querySelector('#text').value;\n    var url = \"https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=\".concat(coordinates, \"&limit=5&access_token=\").concat(mapboxgl.accessToken);\n    fetch(url).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      console.log(data);\n      data.features.forEach(function (feature) {\n        var postalCode = feature.context[0].id;\n        var museum = feature.place_name;\n        console.log(museum);\n        console.log(postalCode.substr(9, postalCode.length));\n      });\n    });\n  });\n};\n\nexport { findMuseum };\nconsole.log('poop');","map":{"version":3,"sources":["/Users/cfujisaki/code/CamillieFu/find-a-museum/app/javascript/packs/museums.js"],"names":["require","config","mapboxgl","findMuseum","mapElement","document","getElementById","accessToken","dataset","mapboxApiKey","submitButton","querySelector","addEventListener","event","preventDefault","coordinates","value","url","fetch","then","response","json","data","console","log","features","forEach","feature","postalCode","context","id","museum","place_name","substr","length"],"mappings":"AAAAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAO,8BAAP,C,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,MAAMC,UAAU,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAnB;AACAJ,EAAAA,QAAQ,CAACK,WAAT,GAAuBH,UAAU,CAACI,OAAX,CAAmBC,YAA1C;AACA,MAAMC,YAAY,GAAGL,QAAQ,CAACM,aAAT,CAAuB,SAAvB,CAArB;AACAD,EAAAA,YAAY,CAACE,gBAAb,CAA8B,OAA9B,EAAuC,UAACC,KAAD,EAAW;AAChDA,IAAAA,KAAK,CAACC,cAAN;AACA,QAAMC,WAAW,GAAGV,QAAQ,CAACM,aAAT,CAAuB,OAAvB,EAAgCK,KAApD;AACA,QAAMC,GAAG,+FAAwFF,WAAxF,mCAA4Hb,QAAQ,CAACK,WAArI,CAAT;AACAW,IAAAA,KAAK,CAACD,GAAD,CAAL,CACGE,IADH,CACQ,UAAAC,QAAQ;AAAA,aAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,KADhB,EAEGF,IAFH,CAEQ,UAACG,IAAD,EAAU;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAA,MAAAA,IAAI,CAACG,QAAL,CAAcC,OAAd,CAAsB,UAACC,OAAD,EAAa;AACjC,YAAMC,UAAU,GAAGD,OAAO,CAACE,OAAR,CAAgB,CAAhB,EAAmBC,EAAtC;AACA,YAAMC,MAAM,GAAGJ,OAAO,CAACK,UAAvB;AACAT,QAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ;AACAR,QAAAA,OAAO,CAACC,GAAR,CAAYI,UAAU,CAACK,MAAX,CAAkB,CAAlB,EAAqBL,UAAU,CAACM,MAAhC,CAAZ;AACD,OALD;AAMD,KAVH;AAWD,GAfD;AAgBD,CApBD;;AAsBA,SAAS/B,UAAT;AACAoB,OAAO,CAACC,GAAR,CAAY,MAAZ","sourcesContent":["require(\"dotenv\").config()\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\n// display map\n// const showMap = (coordinates) => {\n//   mapboxgl.accessToken = token;\n//   const map = new mapboxgl.Map({\n//     container: 'map',\n//     style: 'mapbox://styles/mapbox/streets-v9',\n//     center: coordinates,\n//     zoom: 12\n//   });\n//   new mapboxgl.Marker()\n//     .setLngLat(coordinates)\n//     .addTo(map);\n// };\n\n// const submitButton = document.querySelector('#submit');\n// submitButton.addEventListener('click', (event) => {\n//   event.preventDefault();\n//   const coordinates = document.querySelector('#text').value;\n//   const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=${coordinates}&limit=5&access_token=${process.env.MAPBOX_API_KEY}`;\n//   fetch(url)\n//     .then(response => response.json())\n//     .then((data) => {\n//       console.log(data);\n//       data.features.forEach((feature) => {\n//         const autoComp = `\n//         <span>${feature.place_name}</span>`;\n//         paragraph.insertAdjacentHTML(\"beforeend\", autoComp);\n//       });\n//       // showMap(coordinates);\n//     });\n// });\n\nconst findMuseum = () => {\n  const mapElement = document.getElementById('map');\n  mapboxgl.accessToken = mapElement.dataset.mapboxApiKey;\n  const submitButton = document.querySelector('#submit');\n  submitButton.addEventListener('click', (event) => {\n    event.preventDefault();\n    const coordinates = document.querySelector('#text').value;\n    const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=${coordinates}&limit=5&access_token=${mapboxgl.accessToken}`;\n    fetch(url)\n      .then(response => response.json())\n      .then((data) => {\n        console.log(data);\n        data.features.forEach((feature) => {\n          const postalCode = feature.context[0].id\n          const museum = feature.place_name\n          console.log(museum)\n          console.log(postalCode.substr(9, postalCode.length))\n        });\n      });\n  });\n}\n\nexport { findMuseum };\nconsole.log('poop')\n"]},"metadata":{},"sourceType":"module"}