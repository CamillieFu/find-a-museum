{"ast":null,"code":"import mapboxgl from 'mapbox-gl';\n\nrequire(\"dotenv\").config(); // elements\n\n\nvar paragraph = document.querySelector('p');\nconsole.log('hello'); // display map\n\nvar showMap = function showMap(coordinates) {\n  mapboxgl.accessToken = token;\n  var map = new mapboxgl.Map({\n    container: 'map',\n    style: 'mapbox://styles/mapbox/streets-v9',\n    center: coordinates,\n    zoom: 12\n  });\n  new mapboxgl.Marker().setLngLat(coordinates).addTo(map);\n}; // const submitButton = document.querySelector('#submit');\n// submitButton.addEventListener('click', (event) => {\n//   event.preventDefault();\n//   const coordinates = document.querySelector('#text').value;\n//   const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=${coordinates}&limit=5&access_token=${process.env.MAPBOX_API_KEY}`;\n//   fetch(url)\n//     .then(response => response.json())\n//     .then((data) => {\n//       console.log(data);\n//       data.features.forEach((feature) => {\n//         const autoComp = `\n//         <span>${feature.place_name}</span>`;\n//         paragraph.insertAdjacentHTML(\"beforeend\", autoComp);\n//       });\n//       // showMap(coordinates);\n//     });\n// });\n\n\nvar submitButton = document.querySelector('#submit');\nsubmitButton.addEventListener('click', function (event) {\n  event.preventDefault();\n  var coordinates = document.querySelector('#text').value;\n  var url = \"https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=\".concat(coordinates, \"&limit=5&access_token=\").concat(process.env.MAPBOX_API_KEY);\n  fetch(url).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    console.log(data);\n    data.features.forEach(function (feature) {\n      var postalCode = feature.context[0].id;\n      var museum = feature.place_name;\n      console.log(museum);\n      console.log(postalCode.substr(9, postalCode.length));\n    });\n  });\n});","map":{"version":3,"sources":["/Users/cfujisaki/code/CamillieFu/find-a-museum/app/javascript/packs/museums.js"],"names":["mapboxgl","require","config","paragraph","document","querySelector","console","log","showMap","coordinates","accessToken","token","map","Map","container","style","center","zoom","Marker","setLngLat","addTo","submitButton","addEventListener","event","preventDefault","value","url","process","env","MAPBOX_API_KEY","fetch","then","response","json","data","features","forEach","feature","postalCode","context","id","museum","place_name","substr","length"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,WAArB;;AACAC,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB,G,CACA;;;AACA,IAAMC,SAAS,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAlB;AACAC,OAAO,CAACC,GAAR,CAAY,OAAZ,E,CAEA;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,WAAD,EAAiB;AAC/BT,EAAAA,QAAQ,CAACU,WAAT,GAAuBC,KAAvB;AACA,MAAMC,GAAG,GAAG,IAAIZ,QAAQ,CAACa,GAAb,CAAiB;AAC3BC,IAAAA,SAAS,EAAE,KADgB;AAE3BC,IAAAA,KAAK,EAAE,mCAFoB;AAG3BC,IAAAA,MAAM,EAAEP,WAHmB;AAI3BQ,IAAAA,IAAI,EAAE;AAJqB,GAAjB,CAAZ;AAMA,MAAIjB,QAAQ,CAACkB,MAAb,GACGC,SADH,CACaV,WADb,EAEGW,KAFH,CAESR,GAFT;AAGD,CAXD,C,CAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAMS,YAAY,GAAGjB,QAAQ,CAACC,aAAT,CAAuB,SAAvB,CAArB;AACAgB,YAAY,CAACC,gBAAb,CAA8B,OAA9B,EAAuC,UAACC,KAAD,EAAW;AAChDA,EAAAA,KAAK,CAACC,cAAN;AACA,MAAMf,WAAW,GAAGL,QAAQ,CAACC,aAAT,CAAuB,OAAvB,EAAgCoB,KAApD;AACA,MAAMC,GAAG,+FAAwFjB,WAAxF,mCAA4HkB,OAAO,CAACC,GAAR,CAAYC,cAAxI,CAAT;AACAC,EAAAA,KAAK,CAACJ,GAAD,CAAL,CACGK,IADH,CACQ,UAAAC,QAAQ;AAAA,WAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,GADhB,EAEGF,IAFH,CAEQ,UAACG,IAAD,EAAU;AACd5B,IAAAA,OAAO,CAACC,GAAR,CAAY2B,IAAZ;AACAA,IAAAA,IAAI,CAACC,QAAL,CAAcC,OAAd,CAAsB,UAACC,OAAD,EAAa;AACjC,UAAMC,UAAU,GAAGD,OAAO,CAACE,OAAR,CAAgB,CAAhB,EAAmBC,EAAtC;AACA,UAAMC,MAAM,GAAGJ,OAAO,CAACK,UAAvB;AACApC,MAAAA,OAAO,CAACC,GAAR,CAAYkC,MAAZ;AACAnC,MAAAA,OAAO,CAACC,GAAR,CAAY+B,UAAU,CAACK,MAAX,CAAkB,CAAlB,EAAqBL,UAAU,CAACM,MAAhC,CAAZ;AACD,KALD;AAMD,GAVH;AAWD,CAfD","sourcesContent":["import mapboxgl from 'mapbox-gl';\nrequire(\"dotenv\").config()\n// elements\nconst paragraph = document.querySelector('p');\nconsole.log('hello')\n\n// display map\nconst showMap = (coordinates) => {\n  mapboxgl.accessToken = token;\n  const map = new mapboxgl.Map({\n    container: 'map',\n    style: 'mapbox://styles/mapbox/streets-v9',\n    center: coordinates,\n    zoom: 12\n  });\n  new mapboxgl.Marker()\n    .setLngLat(coordinates)\n    .addTo(map);\n};\n\n// const submitButton = document.querySelector('#submit');\n// submitButton.addEventListener('click', (event) => {\n//   event.preventDefault();\n//   const coordinates = document.querySelector('#text').value;\n//   const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=${coordinates}&limit=5&access_token=${process.env.MAPBOX_API_KEY}`;\n//   fetch(url)\n//     .then(response => response.json())\n//     .then((data) => {\n//       console.log(data);\n//       data.features.forEach((feature) => {\n//         const autoComp = `\n//         <span>${feature.place_name}</span>`;\n//         paragraph.insertAdjacentHTML(\"beforeend\", autoComp);\n//       });\n//       // showMap(coordinates);\n//     });\n// });\n\nconst submitButton = document.querySelector('#submit');\nsubmitButton.addEventListener('click', (event) => {\n  event.preventDefault();\n  const coordinates = document.querySelector('#text').value;\n  const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/museum.json?types=poi&proximity=${coordinates}&limit=5&access_token=${process.env.MAPBOX_API_KEY}`;\n  fetch(url)\n    .then(response => response.json())\n    .then((data) => {\n      console.log(data);\n      data.features.forEach((feature) => {\n        const postalCode = feature.context[0].id\n        const museum = feature.place_name\n        console.log(museum)\n        console.log(postalCode.substr(9, postalCode.length))\n      });\n    });\n});\n"]},"metadata":{},"sourceType":"module"}